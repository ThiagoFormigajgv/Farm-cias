<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>App de Farm√°cias</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
:root {
  --bg: #f9f9f9;
  --card-bg: #fff;
  --text: #333;
  --primary: #2a9d8f;
  --secondary: #264653;
}
[data-theme="dark"] {
  --bg: #121212;
  --card-bg: #1f1f1f;
  --text: #f0f0f0;
  --primary: #2a9d8f;
  --secondary: #264653;
}
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background-color: var(--bg);
  color: var(--text);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

/* -------------------- HEADER MODERNO -------------------- */
.header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  background-color: var(--bg);
  position: sticky;
  top: 0;
  z-index: 1001;
  border-bottom: 1px solid #ccc;
}

.search-box {
  flex: 1;
  display: flex;
  align-items: center;
  background: var(--card-bg);
  border: 1px solid var(--secondary);
  border-radius: 6px;
  padding: 0 10px;
}

.search-box i {
  color: var(--secondary);
  font-size: 18px;
}

.search-box input {
  flex: 1;
  padding: 8px;
  border: none;
  outline: none;
  background: transparent;
  color: var(--text);
  font-size: 16px;
}

.theme-toggle {
  white-space: nowrap;
  background: var(--primary);
  color: #fff;
  border: none;
  padding: 8px 12px;
  border-radius: 6px;
  cursor: pointer;
}

/* Responsivo */
@media (max-width: 600px) {
  .header { flex-direction: column; }
  .theme-toggle { width: 100%; }
  .search-box { width: 100%; }
}

/* -------------------- RESTO DO LAYOUT (SEU ORIGINAL) -------------------- */

.filters {
  display: flex;
  gap: 10px;
  padding: 10px;
  overflow-x: auto;
}
.filter-btn {
  flex-shrink: 0;
  padding: 5px 10px;
  border: 1px solid var(--secondary);
  border-radius: 5px;
  cursor: pointer;
  background-color: var(--card-bg);
  color: var(--text);
}
.filter-btn:hover { background-color: var(--primary); color: #fff; }

.cards {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 15px;
  padding: 10px;
}

.card {
  background-color: var(--card-bg);
  border-radius: 12px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.15);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 350px;
}

.card-body {
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 5px;
  flex: 1;
}

/* Corrigido: garante imagens sempre vis√≠veis */
.carousel {
  position: relative;
  width: 100%;
  height: 200px;
  overflow: hidden;
  touch-action: pan-y;
  background: #e0e0e0;
}

.carousel img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  display: none;
}

.carousel img.active {
  display: block;
}

#details-carousel img {
  width: 100%;
  height: 300px;
  object-fit: cover;
}

.card h2 { font-size: 18px; margin: 5px 0; }
.stars { color: #f5c518; }
.price { color: var(--primary); font-weight: bold; }
.hours { font-size: 14px; color: #555; }

.btn {
  padding: 8px 12px;
  background-color: var(--secondary);
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  margin-top: auto;
}
.btn:hover { background-color: var(--primary); }

.details {
  display: none;
  flex-direction: column;
  gap: 10px;
  padding: 10px;
}
.details.active { display: flex; }

.contact-buttons {
  display: flex;
  gap: 10px;
  margin-top: 10px;
  flex-wrap: wrap;
}
.contact-buttons a {
  flex: 1;
  text-align: center;
  padding: 10px;
  background-color: var(--primary);
  color: white;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  text-decoration: none;
}
.contact-buttons a:hover { background-color: var(--secondary); }

#map {
  width: 100%;
  height: 200px;
  border-radius: 12px;
  margin-top: 10px;
}

@media (max-width: 600px) {
  .carousel { height: 150px; }
  #details-carousel img { height: 200px; }
  .card h2 { font-size: 16px; }
  .cards { flex-direction: column; align-items: center; }
}
</style>
</head>

<body data-theme="light">

<!-- -------------------- HEADER NOVO -------------------- -->
<div class="header">
  <div class="search-box">
    <i class="fas fa-search"></i>
    <input type="text" id="search" placeholder="Buscar farm√°cia..." oninput="searchFarmacia()">
  </div>

  <button class="theme-toggle" onclick="toggleTheme()">üåô Modo Escuro</button>
</div>

<!-- -------------------- FILTROS -------------------- -->
<div class="filters">
  <div class="filter-btn" onclick="filterCards('all')">Todos</div>
  <div class="filter-btn" onclick="filterCards('$$')">$$</div>
  <div class="filter-btn" onclick="filterCards('$$$')">$$$</div>
</div>

<!-- -------------------- CARDS -------------------- -->
<div class="cards" id="cards"></div>

<!-- -------------------- DETALHES -------------------- -->
<div class="details" id="details">
  <button class="btn" onclick="backToList()">‚Üê Voltar</button>
  <div class="carousel" id="details-carousel"></div>
  <h2 id="details-name">Farm√°cia</h2>
  <div class="stars" data-value="0" onclick="rateStars(event)">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
  <div class="price" id="details-price"></div>
  <div class="hours" id="details-hours"></div>
  <div class="address" id="details-address"></div>
  <iframe id="map" src="" style="border:0;" allowfullscreen="" loading="lazy"></iframe>

  <div class="contact-buttons">
    <a href="#" target="_blank" id="btn-whatsapp"><i class="fab fa-whatsapp"></i> WhatsApp</a>
    <a href="#" target="_blank" id="btn-instagram"><i class="fab fa-instagram"></i> Instagram</a>
    <a href="#" target="_blank" id="btn-facebook"><i class="fab fa-facebook-f"></i> Facebook</a>
    <a href="#" target="_blank" id="btn-route"><i class="fas fa-map-marker-alt"></i> Rota</a>
  </div>
</div>

<script>
/* -------------------- LISTA DAS FARM√ÅCIAS -------------------- */
const farmacias = [
  { name: "FARM√ÅCIA NISSEI", images: ["https://i.ibb.co/MxS2z08V/Logopit-1763338127754.jpg","https://i.ibb.co/V0WrMH5g/Logopit-1763333811701.jpg"], stars:5, price:"$$", hours:"Seg‚ÄìSex: 07h‚Äì23h | S√°b: 07h‚Äì22h | Dom: 09h - 21h", address:"Conde Francisco Matarazzo, 200 - Centro", whatsapp:"5543988380691", instagram:"https://www.instagram.com/farmaciasnissei", facebook:"https://www.facebook.com/share/1Bs5xJ1xza/" },
  { name: "FARMAIS", images: ["https://i.ibb.co/WvdtgpYx/Logopit-1763339111054.jpg","https://i.ibb.co/WvdtgpYx/Logopit-1763339111054.jpg"], stars:4, price:"$$$", hours:"Seg‚ÄìSex: 08h‚Äì21h | S√°b: 08h‚Äì15h", address:"Av. Brasil, 220 - Bairro Norte", whatsapp:"5511999990002", instagram:"https://instagram.com/farmacia2", facebook:"https://facebook.com/farmacia2" },
  { name: "FARM√ÅCIA DA FAM√çLIA", images: ["https://i.ibb.co/WvdtgpYx/Logopit-1763339111054.jpg","https://i.ibb.co/WvdtgpYx/Logopit-1763339111054.jpg"], stars:5, price:"$$", hours:"Seg‚ÄìSex: 07h‚Äì21h | S√°b: 08h‚Äì16h", address:"Av. Principal, 50 - Centro", whatsapp:"5511999990003", instagram:"https://instagram.com/farmacia3", facebook:"https://facebook.com/farmacia3" },
  { name: "Farm√°cia Vida", images: ["https://picsum.photos/500/300?random=17","https://picsum.photos/500/300?random=18"], stars:4, price:"$$", hours:"Seg‚ÄìSex: 08h‚Äì19h | S√°b: 08h‚Äì14h", address:"Rua das Flores, 75 - Bairro Jardim", whatsapp:"5511999990004", instagram:"https://instagram.com/farmacia4", facebook:"https://facebook.com/farmacia4" },
  { name: "Farm√°cia Bem Estar", images: ["https://picsum.photos/500/300?random=19","https://picsum.photos/500/300?random=20"], stars:5, price:"$$$", hours:"Seg‚ÄìSex: 08h‚Äì20h | S√°b: 08h‚Äì15h", address:"Av. das Na√ß√µes, 120 - Centro", whatsapp:"5511999990005", instagram:"https://instagram.com/farmacia5", facebook:"https://facebook.com/farmacia5" },
  { name: "Farm√°cia Econ√¥mica", images: ["https://picsum.photos/500/300?random=21","https://picsum.photos/500/300?random=22"], stars:4, price:"$", hours:"Seg‚ÄìSex: 08h‚Äì18h | S√°b: 08h‚Äì13h", address:"Rua da Paz, 30 - Bairro Norte", whatsapp:"5511999990006", instagram:"https://instagram.com/farmacia6", facebook:"https://facebook.com/farmacia6" },
  { name: "Farm√°cia Vida Saud√°vel", images: ["https://picsum.photos/500/300?random=23","https://picsum.photos/500/300?random=24"], stars:5, price:"$$", hours:"Seg‚ÄìSex: 08h‚Äì20h | S√°b: 08h‚Äì14h", address:"Rua Verde, 88 - Bairro Jardim", whatsapp:"5511999990007", instagram:"https://instagram.com/farmacia7", facebook:"https://facebook.com/farmacia7" },
  { name: "Farm√°cia Central Norte", images: ["https://picsum.photos/500/300?random=25","https://picsum.photos/500/300?random=26"], stars:4, price:"$$", hours:"Seg‚ÄìSex: 07h‚Äì20h | S√°b: 08h‚Äì14h", address:"Av. Norte, 200 - Bairro Norte", whatsapp:"5511999990008", instagram:"https://instagram.com/farmacia8", facebook:"https://facebook.com/farmacia8" },
  { name: "Farm√°cia Nova Vida", images: ["https://picsum.photos/500/300?random=27","https://picsum.photos/500/300?random=28"], stars:5, price:"$$$", hours:"Seg‚ÄìSex: 08h‚Äì21h | S√°b: 08h‚Äì16h", address:"Rua Nova, 150 - Bairro Jardim", whatsapp:"5511999990009", instagram:"https://instagram.com/farmacia9", facebook:"https://facebook.com/farmacia9" },
  { name: "Farm√°cia Bem Cuidar", images: ["https://picsum.photos/500/300?random=29","https://picsum.photos/500/300?random=30"], stars:4, price:"$$", hours:"Seg‚ÄìSex: 08h‚Äì19h | S√°b: 08h‚Äì14h", address:"Rua Boa Sa√∫de, 10 - Centro", whatsapp:"5511999990010", instagram:"https://instagram.com/farmacia10", facebook:"https://facebook.com/farmacia10" }
];

/* -------------------- GERA√á√ÉO DOS CARDS -------------------- */
function loadHighResImage(url, width=350, height=200){
  if(url.includes("picsum.photos")){
    return url.replace(/(\d+)\/(\d+)/, `${width}/${height}`);
  }
  return url;
}

function renderCards(){
  const container=document.getElementById('cards');
  container.innerHTML='';

  farmacias.forEach((f,i)=>{
    const card=document.createElement('div');
    card.className='card';
    card.dataset.price=f.price;

    const carousel=document.createElement('div');
    carousel.className='carousel';

    f.images.forEach((img,idx)=>{
      const image=document.createElement('img');
      image.src=loadHighResImage(img);
      if(idx===0) image.classList.add('active');
      carousel.appendChild(image);
    });

    addSwipe(carousel);

    const body=document.createElement('div');
    body.className='card-body';
    body.innerHTML=`<h2>${f.name}</h2>
    <div class="stars">${"‚òÖ".repeat(f.stars)+"‚òÜ".repeat(5-f.stars)}</div>
    <div class="price">${f.price}</div>
    <div class="hours">${f.hours}</div>
    <button class="btn" onclick="showDetails(${i})">Ver detalhes</button>`;

    card.appendChild(carousel);
    card.appendChild(body);
    container.appendChild(card);
  });
}
renderCards();

/* -------------------- CARROSSEL -------------------- */
function addSwipe(c){
  let sX=0,eX=0;
  c.addEventListener('touchstart',e=>{sX=e.touches[0].clientX;});
  c.addEventListener('touchmove',e=>{eX=e.touches[0].clientX;});
  c.addEventListener('touchend',()=>{
    if(sX-eX>50){nextSlide(c);}
    if(eX-sX>50){prevSlide(c);}
  });
}

function nextSlide(c){
  const imgs=c.querySelectorAll('img');
  let i=Array.from(imgs).findIndex(img=>img.classList.contains('active'));
  imgs[i].classList.remove('active');
  i=(i+1)%imgs.length;
  imgs[i].classList.add('active');
}

function prevSlide(c){
  const imgs=c.querySelectorAll('img');
  let i=Array.from(imgs).findIndex(img=>img.classList.contains('active'));
  imgs[i].classList.remove('active');
  i=(i-1+imgs.length)%imgs.length;
  imgs[i].classList.add('active');
}

/* -------------------- DETALHES -------------------- */
function showDetails(index){
  const f=farmacias[index];

  document.getElementById('cards').style.display='none';

  const d=document.getElementById('details');
  d.classList.add('active');

  const c=document.getElementById('details-carousel');
  c.innerHTML='';

  f.images.forEach((img,i)=>{
    const image=document.createElement('img');
    image.src=loadHighResImage(img,1000,600);
    if(i===0) image.classList.add('active');
    c.appendChild(image);
  });

  addSwipe(c);

  document.getElementById('details-name').innerText=f.name;
  document.getElementById('details-price').innerText=f.price;
  document.getElementById('details-hours').innerText=f.hours;
  document.getElementById('details-address').innerText=f.address;

  document.getElementById('btn-whatsapp').onclick=()=>{window.open(`https://wa.me/${f.whatsapp}`,'_blank');};
  document.getElementById('btn-instagram').onclick=()=>{window.open(f.instagram,'_blank');};
  document.getElementById('btn-facebook').onclick=()=>{window.open(f.facebook,'_blank');};
  document.getElementById('btn-route').onclick=()=>{window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(f.address)}`,'_blank');};

  document.getElementById('map').src=`https://maps.google.com/maps?q=${encodeURIComponent(f.address)}&output=embed`;
}

function backToList(){
  document.getElementById('cards').style.display='flex';
  document.getElementById('details').classList.remove('active');
}

/* -------------------- FILTROS -------------------- */
function filterCards(price){
  document.querySelectorAll('.card').forEach(c=>{
    c.style.display = (price==='all'||c.dataset.price===price) ? 'flex':'none';
  });
}

/* -------------------- AVALIA√á√ÉO -------------------- */
function rateStars(e){
  let val=Math.min(Math.max(parseInt(prompt("Digite sua avalia√ß√£o 1-5:")),1),5);
  e.target.innerText="‚òÖ".repeat(val)+"‚òÜ".repeat(5-val);
}

/* -------------------- TEMA -------------------- */
function toggleTheme(){
  const b=document.body;
  if(b.dataset.theme==='light'){
    b.dataset.theme='dark';
    document.querySelector('.theme-toggle').innerText='‚òÄÔ∏è Modo Claro';
  } else {
    b.dataset.theme='light';
    document.querySelector('.theme-toggle').innerText='üåô Modo Escuro';
  }
}

/* -------------------- BUSCA -------------------- */
function searchFarmacia(){
  const query=document.getElementById('search').value.toLowerCase();
  document.querySelectorAll('.card').forEach(card=>{
    const name=card.querySelector('h2').innerText.toLowerCase();
    card.style.display=name.includes(query)?'flex':'none';
  });
}

/* -------------------- CARROSSEL AUTOM√ÅTICO -------------------- */
setInterval(()=>{
  document.querySelectorAll('.carousel').forEach(c=>{nextSlide(c);});
},5000);
</script>

</body>
</html>
